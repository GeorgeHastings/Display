"use strict";var Events=[],Images=[],tmpl=document.getElementById("event-template"),container=document.getElementById("event-container"),Event=function(e,t,n,r,o,a,s){this.summary=e,this.day=t,this.date=n,this.time=r,this.creator=a,this.where=o,this.calendar=s};Event.prototype.getColor=function(){return"NY Support"===this.calendar?"#E56548":"rgb(0,155,255)"},Event.prototype.handler=function(e){var t=JSON.parse(e.target.response);null===t.results?Images.push("http://newyork.ideo.com/assets/img/Community/Default.jpg"):Images.push("http://newyork.ideo.com/"+t.results[0].image)},Event.prototype.getImage=function(){var e=parseEmail(this.creator);callAjax(e,this.handler)};var parseCreatorName=function(e){return e=e.replace(/\s/g,"")},parseEmail=function(e){return e.substring(0,e.indexOf("@"))},fetchImages=function(){for(var e=0;e<Events.length;e++){var t=Events[e];t.getImage(e)}},renderEvents=function(){console.log(Images);for(var e=0;e<Events.length;e++){var t=Events[e],n=tmpl.content.cloneNode(!0);n.querySelector(".event-day").innerHTML=t.day,n.querySelector(".event-date").innerHTML=t.date,n.querySelector(".event-title").innerHTML=t.summary,n.querySelector(".event-location").innerHTML=t.where,n.querySelector(".event-time").innerHTML=t.time,n.querySelector("img").src=Images[e],n.querySelector(".event-info").style.background=t.getColor(),container.appendChild(n)}};document.addEventListener("DOMContentLoaded",function(){checkAuth(),loadCalendarApi(),listUpcomingEvents()});