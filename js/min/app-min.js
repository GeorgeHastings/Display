"use strict";var Events=[],Images=[],tmpl=document.getElementById("event-template"),container=document.getElementById("event-container"),Event=function(e,t,n,r){this.summary=e,this.time=t,this.creator=n,this.where=r};Event.prototype.handler=function(e){var t=JSON.parse(e.target.response);null===t.results?Images.push("http://newyork.ideo.com/assets/img/Community/Default.jpg"):Images.push("http://newyork.ideo.com/"+t.results[0].image)},Event.prototype.getImage=function(){var e=parseEmail(this.creator);callAjax(e,this.handler)};var parseCreatorName=function(e){return e=e.replace(/\s/g,"")},parseEmail=function(e){return e.substring(0,e.indexOf("@"))},fetchImages=function(){for(var e=0;e<Events.length;e++){var t=Events[e];t.getImage(e)}},genEvents=function(){for(var e=0;e<Events.length;e++){var t=Events[e],n=tmpl.content.cloneNode(!0);n.querySelector(".event-title").innerHTML=t.summary,n.querySelector(".event-location").innerHTML=t.where,n.querySelector(".time").innerHTML=t.time,n.querySelector("img").src=Images[e],container.appendChild(n)}},renderToday=function(){document.getElementById("today").innerHTML=moment().format("dddd")};document.addEventListener("DOMContentLoaded",function(){renderToday(),checkAuth(),loadCalendarApi(),listUpcomingEvents()});